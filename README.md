# QZone AutoPraise Pro

网页版QQ空间自动点赞工具（增强版）。这是一个Tampermonkey用户脚本，帮助你在QQ空间好友动态页面自动点赞，支持自定义配置、屏蔽用户、避免游戏转发点赞等功能。

## 功能亮点

### 版本 2.6 更新：
- 修复状态栏逻辑问题：防止safeLike重复调用导致nextTime多次推迟和倒计时跳动；优化点赞逻辑，仅调度实际需要点赞的动态，避免不必要延迟和卡在“跳过”步骤；如果所有动态被跳过，立即完成任务并更新状态栏为等待刷新，而不是等待无谓时间或显示跳过消息。

### 版本 2.5 更新：
- 修复bug：在点赞或滚动任务执行过程中，如果任务时间超过刷新间隔，导致倒计时重置的问题（通过在任务开始时推迟nextTime来避免中断）。
- 美化状态栏：添加进度条表示当前任务进度、使用emoji图标增强视觉反馈、优化字体和间距以提高可读性。

### 版本 2.4 更新：
- 美化控制面板和状态栏的UI（添加过渡动画、圆角按钮、响应式布局）。
- 修复潜在bug如滚动事件重复触发点赞、暂停时定时器未完全清理、cookie值解析边缘案例。
- 优化性能（减少不必要的setInterval调用、批量DOM操作）。
- 添加暗黑模式自动适配选项。

### 版本 2.3 更新：
- 新增暂停/恢复功能，允许用户暂停或恢复自动点赞流程，状态栏显示暂停状态。
- 修复状态栏第二行参数与等待时间显示错误，确保实时同步最新参数和正确时间。
- 优化状态栏多余分隔符逻辑，避免显示异常。
- 兼容性提升：将模板字符串改为字符串连接，提高旧浏览器兼容性，避免潜在语法报错。
- 状态栏背景使用 RGBA 透明度，避免文字透明问题。
- 默认文字颜色提高亮度（暗背景使用白色）。
- 在控制面板 UI 选项卡中添加文字颜色设置（自动/白色/黑色/浅灰）。
- 状态栏更详细显示任务进度、剩余时间等信息，美化透明度与阴影。
- 控制面板增大、居中、透明化，支持左侧菜单栏结构。
- 修复状态栏文字模糊与重叠问题，通过分行显示、调整字体与行高确保清晰。
- 扩展控制面板参数调整，包括屏蔽用户、过滤选项、重试次数、滚动步长、初始延迟等，所有参数集成到面板中，支持动态应用变化。
- 移除双击页面调用配置事件，所有设置统一通过控制面板。
- 控制面板默认隐藏，通过点击浮动按钮打开。

- **版本 1.9 更新**：
  - 状态栏背景使用 RGBA 透明度，避免文字透明问题。
  - 默认文字颜色提高亮度（暗背景使用白色）。
  - 在控制面板 UI 选项卡中添加文字颜色设置（自动/白色/黑色/浅灰）。
  - 状态栏更详细显示任务进度、剩余时间等信息，美化透明度与阴影。
  - 控制面板增大、居中、透明化，支持左侧菜单栏结构。
  - 修复状态栏文字模糊与重叠问题，通过分行显示、调整字体与行高确保清晰。
  - 扩展控制面板参数调整，包括屏蔽用户、过滤选项、重试次数、滚动步长、初始延迟等，所有参数集成到面板中，支持动态应用变化。
  - 移除双击页面调用配置事件，所有设置统一通过控制面板。
  - 控制面板默认隐藏，通过点击浮动按钮打开。

- **自动点赞**：每隔指定时间（默认180秒）刷新页面并点赞可见动态。
- **页面检测**：通过点赞元素检测是否在好友动态页面，如果不在，自动切换并刷新重试。
- **安全机制**：跳过已赞、屏蔽用户和游戏转发内容，避免重复操作。
- **滚动模拟**：自动下滑页面加载更多动态（默认3组）。
- **自定义配置**：通过菜单设置刷新频率、延迟、屏蔽列表等。
- **状态栏**：实时显示刷新时间、状态、重试次数等。
- **菜单控制**：浮动菜单调整参数、测试执行。

## 安装与使用
1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展（Chrome/Firefox等支持）。
2. 从本仓库下载最新版本的脚本文件：`QZone_AutoPraise_Pro.user.js`（位于仓库根目录）。
3. 打开 Tampermonkey 仪表盘（点击浏览器扩展图标 > 仪表盘），直接拖拽下载的 `.user.js` 文件到仪表盘中，或点击 "新建脚本" 并复制粘贴脚本内容。
4. Tampermonkey 会自动识别并安装脚本。启用脚本后，打开QQ空间网页（https://qzone.qq.com/），脚本会自动运行。
5. 首次运行会提示设置参数（如屏蔽QQ号、刷新间隔）。
6. 保持浏览器窗口打开好友动态页面，脚本会后台工作。

## 配置说明
- **屏蔽用户**：输入不想点赞的QQ号，用逗号分隔。
- **游戏转发过滤**：可选，跳过包含“点赞”“转发”“评论”的动态。
- **刷新频率**：默认180秒，建议不低于30秒避免频繁请求。
- **延迟**：刷新后10秒、点赞5秒，确保页面加载。
- **下滑数量**：默认3，控制滚动深度。
- **菜单**：右上角 "AL Menu" 按钮调整，保存后生效。
- **测试**：菜单中 "测试执行" 手动运行一次。

## 注意事项
- 需登录QQ空间，且页面保持在好友动态。
- 如果切换失败或加载卡住，脚本会重试（最多3次）。
- 遵守QQ空间使用条款，避免滥用导致账号异常。
- 调试：打开浏览器控制台（F12）查看日志。

## 开发与贡献
- 作者：llulun
- 许可证：MIT
- 问题反馈：请在Issues提交，或联系我。
- 贡献：欢迎Pull Request优化代码。

## 截图（可选添加）
[示例状态栏截图](link-to-image.png)

享受自动点赞的便利吧！🚀
